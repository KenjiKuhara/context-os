# 71 — docs（md）運用ポリシー

本リポジトリの `docs/` 配下の Markdown の作成・更新ルールと、Phase 管理との関係を定める。**事実ベース・証跡を残す** ことを前提とする。

---

## 1. md 作成・更新のルール

### 1.1 採番

- ファイル名は **番号_テーマ.md** の形式とする（例: `68_phase6_a_tree_ui_mvp.md`）。
- 番号は **連番** とし、既存の最大番号の次から振る（新規追加時は既存一覧を確認して重複・飛びを防ぐ）。
- 同じ Phase やテーマが複数 doc にまたがる場合は、番号で順序が分かるようにする（例: 64 データモデル → 65 実装 → 66 E2E → 67 closeout）。

### 1.2 内容のスタイル

- **事実ベース** で書く。やったこと・やらないこと・前提・制約を明示する。
- 他 doc を参照するときは **ファイル名で明示** する（例: 「64_phase5_c_decomposition_data_model.md 準拠」）。
- 実装メモや手順 doc は、後から同じ変更を再現できる程度の具体性を持たせる（ファイル一覧・主要関数・API の I/O・チェックリストなど）。

### 1.3 更新のタイミング

- **実装前**: スコープ・データモデル・実装計画を doc にまとめてから着手する（Phase5-B/5-C/6-A と同様）。
- **実装中**: 手順やファイル一覧が変わったら、対応する doc をその都度更新する。
- **完了時**: E2E 結果や closeout を記録する doc を更新または新規作成する（§3 参照）。

### 1.4 言語

- プロジェクト方針に従い、**日本語** で記述する（技術用語・コード・ファイル名はそのまま可）。

---

## 2. Phase 管理と md の関係

### 2.1 Phase ごとの doc の役割

| 役割 | 内容 | 例 |
|------|------|-----|
| **計画・スコープ** | その Phase の目的・DoD・やること／やらないこと。 | 59（Phase5-B MVP 計画）、70（Phase6-B スコープ）。 |
| **データモデル** | DB や API の形を決める。スキーマ・DDL・整合性ルール。 | 60（grouping）、64（decomposition）。 |
| **実装手順** | 変更ファイル一覧・Step・API I/O・安全設計。事実ベースで実装者が迷わないようにする。 | 61（grouping）、65（decomposition）、68（Phase6-A tree）。 |
| **E2E 結果** | 手動または API 経由の E2E を実施した結果。実施日・環境・手順・DB 確認・409 確認など。 | 56（relation）、62（grouping）、66（decomposition）。 |
| **closeout** | Phase を「完了」として締める宣言。DoD チェック・割り切り・引き継ぎを 1 本にまとめる。 | 58（Phase5-A）、63（Phase5-B）、67（Phase5-C）、69（Phase6-A）。 |

### 2.2 流れの例

- **Phase 開始**: スコープ doc（と必要ならデータモデル doc）を書く → 実装計画 doc を書く → 実装。
- **Phase 完了**: E2E 結果を記録 → **closeout doc を新規作成** して完了宣言し、次フェーズのスコープ doc があれば更新または新規作成する。

### 2.3 番号と Phase の対応

- 番号は **時系列の連番** であり、Phase 番号と 1:1 ではない（例: 64〜67 が Phase5-C、68〜69 が Phase6-A）。
- どの doc がどの Phase に属するかは、ファイル名の `phase5_a` や `phase6_a` などのサフィックスで判別する。

---

## 3. closeout md の役割

### 3.1 目的

- その Phase を **正式に「完了」とする** プロジェクト上の区切りとする。
- 後から「何を完了として扱ったか」「何をやらなかったか」「次に何を渡したか」を一箇所で参照できるようにする。

### 3.2 含める内容（目安）

| 項目 | 内容 |
|------|------|
| **完了宣言** | その Phase の MVP が完了した旨を 1 文で明記。 |
| **できるようになったこと** または **DoD チェック** | 実装・手順 doc に沿った「できたこと」の一覧、または DoD 表で ✅ を付ける。 |
| **MVP としての割り切り** | 意図的にやらなかったこと・スコープ外を表で列挙。 |
| **次フェーズへの引き継ぎ** | 今後検討するテーマ・候補を箇条書きまたは表で列挙。 |
| **参照** | 証跡となる E2E 結果 doc・実装手順 doc のファイル名を記載。 |

### 3.3 更新方針

- closeout は **その Phase の終了時点で 1 回書く** ことを基本とする。
- 後から誤記や抜けが分かった場合は、必要に応じて最小限の修正を行う。Phase の「完了」という事実は変えない。

---

## 4. 本ポリシーの更新

- docs の運用ルールを変える場合は、本ドキュメント（71_md_operation_policy.md）を更新する。
- 新しい doc 種別や Phase の進め方を追加する場合も、§2・§3 を拡張する形でよい。

---

以上。docs の作成・更新ルール、Phase と md の関係、closeout の役割を定める。
